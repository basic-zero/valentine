<!DOCTYPE html>
<html lang="vi">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

<head>
    <meta charset="UTF-8">
    <title>Happy Valentine ❤️</title>

    <style>
        * {
            box-sizing: border-box;
        }

        body {
            margin: 0;
            overflow: hidden;
            font-family: 'Segoe UI', sans-serif;
            background: linear-gradient(135deg, #ff9a9e, #fad0c4);
            height: 100vh;
        }

        /* CARD */
        .card {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: white;
            padding: 25px;
            border-radius: 20px;
            text-align: center;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
            z-index: 10;
            width: 90%;
            max-width: 400px;
        }

        .card h1 {
            color: #ff4d6d;
            font-size: 24px;
            margin-bottom: 10px;
        }

        .card p {
            font-size: 15px;
        }

        button,
        input {
            margin-top: 15px;
            padding: 12px 28px;
            border-radius: 30px;
            border: none;
            font-size: 1em;
        }

        button {
            background: linear-gradient(135deg, #ff2e75, #ff6aa5);
            color: white;
            cursor: pointer;
        }

        input {
            width: 80%;
            text-align: center;
        }


        /* FALLING ITEMS */
        .falling {
            position: absolute;
            cursor: pointer;
            animation: fall linear infinite;
            user-select: none;
            padding: 10px;
            border-radius: 16px;
            /* tăng vùng bấm */
        }

        @keyframes fall {
            from {
                transform: translateY(-100px) rotate(0deg);
            }

            to {
                transform: translateY(110vh) rotate(360deg);
            }
        }

        /* POPUP */
        .popup {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.7);
            display: flex;
            justify-content: center;
            align-items: center;
            visibility: hidden;
            opacity: 0;
            transition: 0.3s;
            z-index: 100;
            padding: 15px;
        }

        .popup.active {
            visibility: visible;
            opacity: 1;
        }

        .popup-content {
            background: white;
            padding: 20px;
            border-radius: 20px;
            text-align: center;
            width: 100%;
            max-width: 400px;
            animation: zoom 0.3s ease;
        }

        .popup-content img {
            width: 100%;
            border-radius: 15px;
            margin-bottom: 10px;
        }

        .popup-content p {
            font-size: 16px;
            margin-bottom: 10px;
        }

        .popup-content button {
            width: 100%;
            padding: 12px;
            border: none;
            background: #ff4d6d;
            color: white;
            border-radius: 12px;
            font-size: 16px;
        }

        @keyframes zoom {
            from {
                transform: scale(0.8);
            }

            to {
                transform: scale(1);
            }
        }

        /* Hint cho PC */
        .pc-hint {
            position: fixed;
            bottom: 20px;
            font-size: 0.9em;
            opacity: 0.7;
            width: 100%;
            text-align: center;
        }
    </style>
</head>

<body>
    <audio id="music" src="btyl.mp3" loop></audio>
    <div class="card" id="card">
        <h1>Tặng em một rổ kỹ niệm, nhặt hết quà em nhé</h1>
        <button onclick="start();">Bắt đầu ❤️</button>
    </div>
    <div></div>
    <div class="popup" id="popup">
        <div class="popup-content">
            <img id="popup-img">
            <p id="popup-text"></p>
            <button onclick="closePopup()">Đóng</button>
        </div>
    </div>

    <script>

        const images = [
            { src: "images/heart.png", type: "heart", image: "IMG_20200221_200641", content: "Bé iu nhà anh cũng biết làm nũng nè!", isShow: false },
            { src: "images/gift.png", type: "gift", image: "IMG_20200513_192951", content: "Ai cười tưới vậy ta?", isShow: false },
            { src: "images/letter.png", type: "letter", image: "IMG_20200516_115920", content: "Chỗ này là nhà sách nè mình đi Van Hạnh mall", isShow: false },
            { src: "images/heart.png", type: "heart", image: "IMG_20200516_141649", content: "Ai mà xinh vậy", isShow: false },
            { src: "images/gift.png", type: "gift", image: "IMG_20200524_160014", content: "Chụp ảnh đôi nè, anh nhớ cái áo cặp này ghê", isShow: false },
            { src: "images/letter.png", type: "letter", image: "IMG_20200612_131012", content: "Hồi đó mình hay ăn bánh này, sưu tập quá trời luôn, hy vọng em không bán ve chai hết rồi", isShow: false },
            { src: "images/heart.png", type: "heart", image: "IMG_20200626_131719", content: "Hồi đó nhìn e ngây thơ đáng yêu dễ ghê, giờ vẫn vậy nhưng khó tinh với anh hơn rồi", isShow: false },
            { src: "images/gift.png", type: "gift", image: "IMG_20200626_132142", content: "Cười tươi nè", isShow: false },
            { src: "images/letter.png", type: "letter", image: "IMG_20200626_132651", content: "Mè nheo nà", isShow: false },
            { src: "images/heart.png", type: "heart", image: "IMG_20200704_160227", content: "Tấm này là anh đi teambuilding mà trốn ra với em nè", isShow: false },
            { src: "images/gift.png", type: "gift", image: "IMG_20200713_190931", content: "Xanh xanh KDU", isShow: false },
            { src: "images/letter.png", type: "letter", image: "IMG_20201018_145238", content: "Hồi đó có người mê đi hội chợ mua đồ, cũng lâu rồi không còn cơ hội đi với em nữa, không biết ai đó còn muốn đi với anh không", isShow: false },
            { src: "images/heart.png", type: "heart", image: "IMG_20201018_145547", content: "Hội chợ nữa nè, thơm thơm", isShow: false },
            { src: "images/gift.png", type: "gift", image: "IMG_20201229_222802", content: "Đà Lạc, nơi đầu tiên mình đi du lịch chung. Năm nay thì mình chưa đi, a xin lỗi vì anh mà mình không thể du lịch chung, cố gắng 2026 sẽ bù 1 chuyến nhé", isShow: false },
            { src: "images/letter.png", type: "letter", image: "IMG_20210115_130605", content: "Hờn anh rồi, vì anh mà 1 năm qua em buồn nhiều đúng không. Cho anh xin lỗi nhiều mà", isShow: false }
        ];

        let indexShowFalling = 0;

        function createFallingItem() {
            const item = document.createElement("img");
            const randomItem = images[indexShowFalling];
            indexShowFalling++;
            if (indexShowFalling == images.length) {
                clearInterval(intervalId);
            }
            if (randomItem.isShow) {
                return;
            }
            item.src = randomItem.src;
            item.className = "falling " + randomItem.image;
            const maxLeft = window.innerWidth - (window.innerWidth < 768 ? 100 : 60);
            const width = window.innerWidth < 768 ? 150 : 100;
            console.log(window.innerWidth);
            item.style.left = Math.random() * maxLeft + "px";
            item.style.width = width + "px";
            item.style.animationDuration = (4 + Math.random() * 4) + "s";

            item.onclick = function () {
                showPopup(randomItem);
            };
            item.touchStart = function () {
                showPopup(randomItem);
            };

            document.body.appendChild(item);

            setTimeout(() => {
                item.remove();
            }, 10000000);
        }

        let intervalId = 0;
        function start() {
            document.getElementById("music").play();
            const card = document.getElementById("card");
            card.style.display = "none";
            intervalId = setInterval(createFallingItem, 1000);
        }
        let countClickPopup = 0;
        function showPopup(item) {
            item.isShow = true;
            const popup = document.getElementById("popup");
            const text = document.getElementById("popup-text");
            const image = document.getElementById("popup-img");
            const fallings = document.getElementsByClassName("falling " + item.image);
            for (let i = 0; i < fallings.length; i++) {
                fallings[i].remove()
            }
            image.src = "images/" + item.image + ".jpg";
            text.innerText = item.content;
            popup.classList.add("active");
        }

        function closePopup() {
            document.getElementById("popup").classList.remove("active");
            countClickPopup++;
            if (countClickPopup == images.length) {
                window.location.replace("3a708818-3080-4468-bd70-7d236230ffa2.html");
            }
        }

    </script>

</body>

</html>