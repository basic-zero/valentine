<!DOCTYPE html>
<html lang="vi">

<head>
    <meta charset="UTF-8">
    <title>Valentine Timeline üíñ</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>

    <style>
        * {
            box-sizing: border-box;
            font-family: 'Segoe UI', sans-serif;
        }

        body {
            margin: 0;
            height: 100vh;
            background: radial-gradient(circle at top, #f25fff, #ff2e75);
            display: flex;
            justify-content: center;
            align-items: center;
            overflow: hidden;
            color: white;
        }

        /* CARD */
        .card {
            width: 92%;
            max-width: 480px;
            background: rgba(255, 255, 255, 0.15);
            backdrop-filter: blur(14px);
            border-radius: 24px;
            padding: 28px;
            text-align: center;
            box-shadow: 0 30px 60px rgba(0, 0, 0, 0.35);
            animation: zoomIn 0.6s ease;
        }

        h1 {
            margin-top: 0;
        }

        .year {
            font-size: 2.6em;
            font-weight: bold;
            animation: glow 2s infinite alternate;
        }

        img {
            width: 100%;
            border-radius: 18px;
            margin: 15px 0;
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.4);
            animation: float 4s ease-in-out infinite;
        }

        video {
            width: 100%;
            border-radius: 18px;
            margin: 15px 0;
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.4);
            animation: float 4s ease-in-out infinite;
        }


        button,
        input {
            margin-top: 15px;
            padding: 12px 28px;
            border-radius: 30px;
            border: none;
            font-size: 1em;
        }

        button {
            background: linear-gradient(135deg, #ff2e75, #ff6aa5);
            color: white;
            cursor: pointer;
        }

        input {
            width: 80%;
            text-align: center;
        }

        /* HEART */
        .heart {
            position: absolute;
            animation: fly 6s linear infinite;
        }

        /* CANVAS */
        canvas {
            position: fixed;
            top: 0;
            left: 0;
            pointer-events: none;
        }

        @keyframes fly {
            from {
                transform: translateY(100vh) scale(0.4);
                opacity: 0;
            }

            50% {
                opacity: 1;
            }

            to {
                transform: translateY(-10vh) scale(1.2);
                opacity: 0;
            }
        }

        @keyframes zoomIn {
            from {
                opacity: 0;
                transform: scale(0.85);
            }

            to {
                opacity: 1;
                transform: scale(1);
            }
        }

        @keyframes glow {
            from {
                text-shadow: 0 0 10px #fff;
            }

            to {
                text-shadow: 0 0 25px #ffb3d1;
            }
        }

        @keyframes float {

            0%,
            100% {
                transform: translateY(0);
            }

            50% {
                transform: translateY(-10px);
            }
        }

        /* PARALLAX CORE */
        .parallax {
            position: relative;
            overflow: hidden;
        }

        .layer {
            position: relative;
            transition: transform 0.15s ease-out;
            will-change: transform;
        }

        /* MOBILE OPTIMIZATION */
        @media (max-width: 600px) {
            .card {
                padding: 22px;
                border-radius: 26px;
            }

            img {
                border-radius: 20px;
            }

            p {
                font-size: 1.05em;
            }
        }

        /* TILT EFFECT */
        .card {
            transform-style: preserve-3d;
            transition: transform 0.15s ease-out;
        }

        /* PC click zone */
        .pc-nav {
            display: none;
            position: fixed;
            top: 0;
            width: 50%;
            height: 100vh;
            z-index: 5;
        }

        .pc-left {
            left: 0;
        }

        .pc-right {
            right: 0;
        }

        /* Ch·ªâ hi·ªán tr√™n PC */
        body.pc .pc-nav {
            display: block;
        }

        /* Hint cho PC */
        .pc-hint {
            position: fixed;
            bottom: 20px;
            font-size: 0.9em;
            opacity: 0.7;
        }

        /* Mobile t·ªëi ∆∞u */
        body.mobile .pc-hint {
            display: none;
        }

        /* Khi c·∫ßn nh·∫≠p li·ªáu th√¨ t·∫Øt click zone */
        body.input-mode .pc-nav {
            display: none !important;
        }


        /* ===== TRANSITION CORE ===== */
        .card {
            transition: transform 0.8s ease, opacity 0.8s ease;
        }

        /* ===== EFFECT CLASSES ===== */
        .fade {
            animation: fadeIn 0.8s ease forwards;
        }

        .slide-up {
            animation: slideUp 0.9s ease forwards;
        }

        .zoom {
            animation: zoomIn 0.9s ease forwards;
        }

        .split {
            animation: splitReveal 1s ease forwards;
        }

        .flip {
            animation: flipIn 1s ease forwards;
        }

        .pulse {
            animation: heartPulse 1.2s ease infinite;
        }

        .white-fade {
            animation: whiteFade 1.5s ease forwards;
        }

        /* ===== KEYFRAMES ===== */
        @keyframes fadeIn {
            from {
                opacity: 0;
            }

            to {
                opacity: 1;
            }
        }

        @keyframes slideUp {
            from {
                opacity: 0;
                transform: translateY(40px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes zoomIn {
            from {
                opacity: 0;
                transform: scale(0.85);
            }

            to {
                opacity: 1;
                transform: scale(1);
            }
        }

        @keyframes splitReveal {
            from {
                clip-path: inset(0 50% 0 50%);
                opacity: 0;
            }

            to {
                clip-path: inset(0);
                opacity: 1;
            }
        }

        @keyframes flipIn {
            from {
                transform: rotateY(90deg);
                opacity: 0;
            }

            to {
                transform: rotateY(0);
                opacity: 1;
            }
        }

        @keyframes heartPulse {
            0% {
                transform: scale(1);
            }

            50% {
                transform: scale(1.05);
            }

            100% {
                transform: scale(1);
            }
        }

        @keyframes whiteFade {
            0% {
                background: rgba(255, 255, 255, 0);
            }

            50% {
                background: rgba(255, 255, 255, 0.8);
            }

            100% {
                background: rgba(255, 255, 255, 0);
            }
        }



        /* BACKGROUND FX LAYER */
        #bg-effect {
            position: fixed;
            inset: 0;
            z-index: 0;
            pointer-events: none;
            overflow: hidden;
        }

        /* CARD N·∫∞M TR√äN */
        .card {
            position: relative;
            z-index: 2;
        }

        /* ===== BACKGROUND EFFECTS ===== */

        /* Glow */
        .bg-glow {
            background: radial-gradient(circle at center, rgba(255, 255, 255, 0.15), transparent 70%);
            animation: glowPulse 4s infinite alternate;
        }

        /* Particles */
        .bg-particles::before {
            content: "";
            position: absolute;
            inset: 0;
            background-image:
                radial-gradient(circle, rgba(255, 255, 255, 0.3) 2px, transparent 2px);
            background-size: 40px 40px;
            animation: moveParticles 20s linear infinite;
        }

        /* Light rain */
        .bg-rain::before {
            content: "";
            position: absolute;
            inset: 0;
            background: linear-gradient(transparent, rgba(255, 255, 255, 0.15), transparent);
            animation: rain 2s linear infinite;
        }

        /* Waves */
        .bg-wave {
            background: linear-gradient(120deg, rgba(255, 255, 255, 0.08), transparent);
            animation: wave 6s ease-in-out infinite;
        }

        /* Stars */
        .bg-stars {
            background-image:
                radial-gradient(2px 2px at 20% 30%, white, transparent),
                radial-gradient(1px 1px at 80% 40%, white, transparent),
                radial-gradient(1.5px 1.5px at 50% 80%, white, transparent);
            animation: starsMove 30s linear infinite;
        }

        /* Heart beat */
        .bg-heartbeat {
            animation: heartBG 1.2s infinite;
        }

        /* ===== KEYFRAMES ===== */
        @keyframes glowPulse {
            from {
                opacity: 0.4;
            }

            to {
                opacity: 0.9;
            }
        }

        @keyframes moveParticles {
            from {
                background-position: 0 0;
            }

            to {
                background-position: 1000px 1000px;
            }
        }

        @keyframes rain {
            from {
                transform: translateY(-100%);
            }

            to {
                transform: translateY(100%);
            }
        }

        @keyframes wave {
            0% {
                transform: translateX(-20%);
            }

            50% {
                transform: translateX(20%);
            }

            100% {
                transform: translateX(-20%);
            }
        }

        @keyframes starsMove {
            from {
                background-position: 0 0;
            }

            to {
                background-position: 0 1000px;
            }
        }

        @keyframes heartBG {
            0% {
                transform: scale(1);
            }

            50% {
                transform: scale(1.05);
            }

            100% {
                transform: scale(1);
            }
        }


        /* CURSOR HEART CYAN */
        body.pc {
            cursor: url("data:image/svg+xml;utf8,\
<svg xmlns='http://www.w3.org/2000/svg' width='32' height='32' viewBox='0 0 24 24'>\
<path fill='%2300ffff' d='M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 6 4 4 6.5 4c1.74 0 3.41 1.01 4.22 2.44C11.09 5.01 12.76 4 14.5 4 17 4 19 6 19 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z'/>\
</svg>") 16 16, auto;
        }

        /* Hover button v·∫´n ƒë·∫πp */
        body.pc button:hover {
            cursor: pointer;
        }
    </style>
</head>

<body>
    <div id="bg-effect"></div>
    <div class="pc-nav pc-left" onclick="prev()"></div>
    <div class="pc-nav pc-right" onclick="next()"></div>

    <div class="pc-hint">üñ± Click tr√°i / ph·∫£i ƒë·ªÉ xem ti·∫øp</div>

    <audio id="music" src="doibo.mp3" loop></audio>
    <canvas id="fx"></canvas>

    <div class="card" id="card"></div>
    <script>
        let step = 0;
        let startX = 0, startY = 0;
        let currentX = 0, currentY = 0;

        const anniversary = "0809"; // DDMM

        const steps = [


            ...[
                {
                    "title": "Kho·∫£ng l·∫∑ng gi·ªØa b·ªçn m√¨nh",
                    "img": "IMG_20231022_122733.jpg",
                    "content": "Anh kh√¥ng bi·∫øt l√† t·ª´ khi n√†o b·ªçn m√¨nh kh√¥ng c√≤n y√™u nhau nh∆∞ tr∆∞·ªõc, c√≥ l·∫ª l√† khi anh b·∫Øt ƒë·∫ßu ƒëi l√†m. V·ªõi v√≤ng xoay cu·ªôc s·ªëng anh ƒë√£ qu√™n m·∫•t b√™n anh v·∫´n c√≤n m·ªôt ng∆∞·ªùi th∆∞∆°ng anh, v√† ƒëang ch·ªù anh."
                },
                {
                    "title": "Kho·∫£ng l·∫∑ng gi·ªØa b·ªçn m√¨nh",
                    "img": "IMG_20251012_101025.jpg",
                    "content": "N√≥i th·∫≠t th√¨ b·∫£n th√¢n anh ·ªü th·ªùi ƒëi·ªÉm n√†y c≈©ng kh√¥ng nh·∫≠n ra b·∫£n th√¢n sai th·∫ø n√†o. Nh√¨n l·∫°i th√¨ anh m·ªõi hi·ªÉu em ƒë√£ m·ªôt m√¨nh tr·∫£i qua nh·ªØng g√¨."
                },
                {
                    "title": "Kho·∫£ng l·∫∑ng gi·ªØa b·ªçn m√¨nh",
                    "img": "IMG_20250513_234840.jpg",
                    "content": "R·ªìi anh ch·ª£t nh·∫≠n ra c√¥ g√°i ngay th∆° y√™u anh h·∫øt l√≤ng ng√†y n√†o, nay ƒë√£ kh√¥ng c√≤n c·∫ßn anh. Con ng∆∞·ªùi anh th·∫≠t m·∫´u thu·∫©n, anh ƒë√£ t·ª´ng mu·ªën em tr∆∞·ªüng th√†nh, ƒë·ªôc l·∫≠p nh∆∞ng r·ªìi khi em l√†m ƒë∆∞·ª£c anh l·∫°i th·∫•y m√¨nh th·ª´a th·∫£i."
                },
                {
                    "title": "Kho·∫£ng l·∫∑ng gi·ªØa b·ªçn m√¨nh",
                    "img": "",
                    "content": "Khi ƒë·ªÅ ngh·ªã m√¨nh ·ªü ri√™ng, anh v·∫´n nh·ªõ l·ªùi h·ª©a c·ªßa m√¨nh r·∫±ng anh s·∫Ω kh√¥ng bao gi·ªù b·ªè r∆°i em. Anh ƒë√£ th·∫•t h·ª©a, v√¨ anh l√∫c ƒë√≥ anh kh√¥ng t·ª± tin v√†o b·∫£n th√¢n m√¨nh, anh s·ª£ b√™n anh em s·∫Ω kh√¥ng h·∫°nh ph√∫c. Anh sai l·∫Øm ƒë√∫ng kh√¥ng, anh ∆∞·ªõc c√≥ em ·ªü ƒë√¢y l√∫c n√†y ƒë·ªÉ ƒë√°nh cho anh t·ªânh ra. Em n√≥i ƒë√∫ng l·∫Øm \"Anh ƒë·ª´ng t·ª± cho r·∫±ng m√¨nh ƒë√∫ng\"."
                },
                {
                    "title": "B·∫Øt ƒë·∫ßu m·ªõi cho t√¨nh y√™u c·ªßa ch√∫ng m√¨nh",
                    "img": "IMG_20250814_222214.jpg",
                    "content": "Th√¥i chuy·ªán qua r·ªìi, xin l·ªói m√£i em c≈©ng ch√°n anh r·ªìi. D√π nh∆∞ th·∫ø n√†o d√π anh kh√¥ng c√≤n b√™n em n·ªØa th√¨ c≈©ng cho anh c∆° h·ªôi quan t√¢m em, lo cho em t·ªëi ƒëa nh·ªØng g√¨ anh c√≥ th·ªÉ nha. V√¨ anh v·∫´n l√† ng∆∞·ªùi theo ƒëu·ªïi t√¨nh y√™u c·ªßa em m√†."
                },
            ].map(y => `
<div class="parallax">
    <div class="layer year" data-depth="0.2">${y.title}</div>
    <div class="layer" data-depth="0.4">
        <img src="images/${y.img}" alt="">
    </div>
    <div class="layer" data-depth="0.6">
        <p>${y.content}</p>
    </div>
</div>
`),
            `
<div class="parallax">
    <h1>üîí Valentine 2026</h1>
    <p>Nh·∫≠p ng√†y k·ª∑ ni·ªám üíç</p>
    <input id="pass" placeholder="DDMM">
    <button onclick="unlock()">M·ªü kh√≥a ‚ù§Ô∏è</button>
</div>
`
        ];

        const isMobile = ('ontouchstart' in window) || navigator.maxTouchPoints > 0;
        document.body.classList.add(isMobile ? "mobile" : "pc");

        function applyBackgroundEffect(step) {
            const bg = document.getElementById("bg-effect");
            bg.className = "";

            const effects = [
                "bg-glow",        // Intro
                "bg-heartbeat",   // 2019
                "bg-particles",   // 2020
                "bg-rain",        // 2021
                "bg-wave",        // 2022
                "bg-stars",       // 2023
                "bg-heartbeat",   // 2024
                "bg-glow"         // 2025 (confetti + fireworks ri√™ng)
            ];

            bg.classList.add(effects[step] || "bg-glow");
        }


        function getEffectByStep(step) {
            const effects = [
                "fade",        // Intro
                "slide-up",    // 2019
                "zoom",        // 2020
                "split",       // 2021
                "flip",        // 2022
                "zoom",        // 2023
                "pulse",       // 2024
                "white-fade"   // 2025
            ];
            return effects[step] || "fade";
        }

        function render() {

            applyBackgroundEffect(step);
            const card = document.getElementById("card");

            // reset animation
            card.className = "card";
            void card.offsetWidth;

            // apply effect
            const effect = getEffectByStep(step);
            card.classList.add(effect);

            // render content
            card.innerHTML = steps[step];

            // PC input fix (ƒë√£ l√†m ·ªü b∆∞·ªõc tr∆∞·ªõc)
            if (!isMobile && step === steps.length - 1) {
                document.body.classList.add("input-mode");
            } else {
                document.body.classList.remove("input-mode");
            }
        }
        render();

        /* STEP CONTROL */
        function next() {
            if (step < steps.length - 1) step++;
            render();
            if (step == 1) {
                playMusic();
            }
        }
        function prev() {
            if (step > 0) step--;
            render();
        }

        /* MUSIC */
        function playMusic() {
            document.getElementById("music").play();
        }


        function celebrate2025() {
            confetti({
                particleCount: 180,
                spread: 120,
                origin: { y: 0.6 },
                colors: ['#00ffff', '#ff69b4', '#ffffff']
            });
        }

        /* PASSWORD */
        function unlock() {
            if (document.getElementById("pass").value === anniversary) {
                document.getElementById("card").innerHTML = `
        <div class="parallax">
            <div class="layer year" data-depth="0.2">2026</div>
            <div class="layer" data-depth="0.4">
                <video autoplay>
                   <source  src="images/VID_20220520_001355.mp4" type="video/mp4"> 
                </video>
            </div>
            <div class="layer" data-depth="0.6">
                <p>C·∫£m ∆°n em v√¨ ƒë√£ b√™n anh, ch√∫c em m·ªôt Valentine vui v·∫ª. H·ª©a l√† kh√¥ng ƒë·ªÉ em c√¥ ƒë∆°n n·ªØa ƒë√¢u. M·ªôt l·∫ßn n·ªØa tin anh nha em ‚ù§Ô∏è</p>
            </div>
        </div>`;
                document.getElementById("music").pause();
                celebrate2025();
                fireworks();
            } else alert("Sai r·ªìi n√® üòù, g·ª£i √Ω n√® ng√†y k·ª∑ ni·ªám m√¨nh y√™u nhau ƒë√≥.");
        }

        /* GESTURE + PARALLAX */


        /* ===== MOBILE: SWIPE + PARALLAX ===== */
        if (isMobile) {
            let startX = 0, startY = 0, dx = 0, dy = 0;

            document.addEventListener("touchstart", e => {
                startX = e.touches[0].clientX;
                startY = e.touches[0].clientY;
            });

            document.addEventListener("touchmove", e => {
                dx = e.touches[0].clientX - startX;
                dy = e.touches[0].clientY - startY;
                applyParallax(dx, dy);
            });

            document.addEventListener("touchend", () => {
                if (Math.abs(dx) > 60) dx < 0 ? next() : prev();
                resetParallax();
                dx = dy = 0;
            });

        }
        /* ===== PC: CLICK + MOUSE PARALLAX ===== */
        else {
            document.addEventListener("mousemove", e => {
                const x = e.clientX - innerWidth / 2;
                const y = e.clientY - innerHeight / 2;
                applyParallax(x * 0.05, y * 0.05);
            });
        }

        /* ===== PARALLAX ENGINE (D√ôNG CHUNG) ===== */
        function applyParallax(x, y) {
            document.querySelectorAll(".layer").forEach(layer => {
                const depth = layer.dataset.depth || 0.3;
                layer.style.transform =
                    `translate(${x * depth}px, ${y * depth}px)`;
            });

            document.getElementById("card").style.transform =
                `rotateX(${-y / 60}deg) rotateY(${x / 60}deg)`;
        }

        function resetParallax() {
            document.querySelectorAll(".layer").forEach(l => l.style.transform = "");
            document.getElementById("card").style.transform = "";
        }
    </script>


</body>

</html>